@page
@model MovieMatch.Areas.Identity.Pages.Account.Manage.StreamingPlatformsModel
@{
    ViewData["Title"] = "Platformy streamingowe";
    ViewData["ActivePage"] = ManageNavPages.StreamingPlatforms;

    string IconClass(string platform) => platform switch
    {
        "Netflix" => "fa-solid fa-n",
        "HBO Max" => "fa-solid fa-film",
        "Amazon Prime Video" => "fa-brands fa-amazon",
        "Disney+" => "fa-solid fa-star",
        "Apple TV+" => "fa-brands fa-apple",
        "SkyShowtime" => "fa-solid fa-clapperboard",
        "Viaplay" => "fa-solid fa-play",
        "Player" => "fa-solid fa-circle-play",
        "Canal+ Online" => "fa-solid fa-tv",
        "Polsat Box Go" => "fa-solid fa-satellite-dish",
        "TVP VOD" => "fa-solid fa-video",
        _ => "fa-solid fa-tv"
    };
}

<h3 class="mb-4">Platformy streamingowe</h3>

<div class="row">
    <div class="col-md-8 col-lg-6">
        <form method="post">
            <div class="form-group mb-3">
                <label class="fw-bold">Zaznacz platformy, z kt√≥rych korzystasz:</label>

                <div class="mt-3 platform-list">
                    @foreach (var p in Model.AllPlatforms)
                    {
                        var id = $"platform_{p.GetHashCode()}";
                        <div class="form-check mb-2 platform-item">
                            <input class="form-check-input"
                                   type="checkbox"
                                   id="@id"
                                   name="SelectedPlatforms"
                                   value="@p"
                                   @(Model.SelectedPlatforms.Contains(p) ? "checked" : "") />
                            <label class="form-check-label d-flex align-items-center gap-2" for="@id">
                                <i class="@IconClass(p) platform-icon"></i>
                                <span>@p</span>
                            </label>
                        </div>
                    }
                </div>
            </div>

            <button type="submit" class="btn btn-primary btn-lg w-100 mt-3">
                Zapisz zmiany
            </button>

            @if (TempData["StatusMessage"] is string msg)
            {
                <div class="alert alert-success mt-3">@msg</div>
            }
        </form>
    </div>
</div>
